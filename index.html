<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio | Lisa Voronov</title>
    <style>
        @font-face {
            font-family: 'PP Neue Montreal';
            src: url('PPNeueMontreal-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        body {
            margin: 0; 
            padding: 0;
            background: #0D0D0D; 
            font-family: 'PP Neue Montreal', sans-serif; 
        }

        /* Стили для десктопной версии */
        .desktop-view {
            display: flex;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        .column { 
            width: 50%; 
            height: 100vh; 
            overflow: hidden; 
            box-sizing: border-box;
        }

        .column::-webkit-scrollbar { 
            display: none; 
        } 

        .item { 
            width: 100%; 
            height: 100vh; 
            display: flex;
            align-items: center;
            justify-content: center;
            background: #0D0D0D; /* Фон, пока грузится фото */
        }

        .item img { 
            width: 100%; 
            height: 100vh; 
            object-fit: cover; 
            display: block; 
            transition: opacity 0.5s ease; 
        }

        .item a {
            display: block;
            width: 100%;
            height: 100%;
        }

        .item a:hover img {
            opacity: 0.6;
        }

        /* Стили для мобильной версии по умолчанию скрыты */
        #welcome-screen, .mobile-view {
            display: none;
        }

        @media (max-width: 768px) {
            body {
                display: block;
                height: auto;
                overflow-y: auto;
            }

            .desktop-view {
                display: none;
            }

            /* Приветственный экран */
            #welcome-screen {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: #0D0D0D;
                z-index: 1000;
                color: rgba(255, 255, 255, 0.9);
                font-size: 18px;
                letter-spacing: 0.1em;
                text-transform: uppercase;
                opacity: 1;
                transition: opacity 1s 0.5s ease-out; /* Плавное исчезновение с задержкой */
            }

            #welcome-screen.hidden {
                opacity: 0;
                pointer-events: none; /* Чтобы не мешал кликам после исчезновения */
            }

            .welcome-text {
                opacity: 0;
                animation: fadeInText 1.5s ease-in-out forwards;
            }

            .welcome-text:last-child {
                animation-delay: 0.5s; /* Появляется чуть позже */
            }

            @keyframes fadeInText {
                to { opacity: 1; }
            }

            /* Контент для мобильных */
            .mobile-view {
                display: block;
                padding: 20px;
                box-sizing: border-box;
            }

            .mobile-view a {
                display: block;
                margin-bottom: 20px;
            }

            .mobile-view img {
                width: 100%;
                height: auto;
                display: block;
            }
        }
    </style>
</head>
<body>

    <div id="welcome-screen">
        <div class="welcome-text">graphic designer</div>
        <div class="welcome-text">lisa voronov</div>
    </div>

    <div class="desktop-view">
        <div id="left" class="column">
            <div class="item"><img src="work1.png" loading="eager" decoding="async"></div>
            <div class="item"><a href="project1.html"><img src="work3.png" loading="eager" decoding="async"></a></div>
            <div class="item"><a href="project2.html"><img src="work5.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project3.html"><img src="work7.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project4.html"><img src="work9.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project5.html"><img src="work11.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project6.html"><img src="work13.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project7.html"><img src="work15.png" loading="lazy" decoding="async"></a></div>
        </div>

        <div id="right" class="column">
            <div class="item"><a href="project7.html"><img src="work16.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project6.html"><img src="work14.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project5.html"><img src="work12.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project4.html"><img src="work10.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project3.html"><img src="work8.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project2.html"><img src="work6.png" loading="lazy" decoding="async"></a></div>
            <div class="item"><a href="project1.html"><img src="work4.png" loading="eager" decoding="async"></a></div>
            <div class="item"><img src="work2.png" loading="eager" decoding="async"></div>
        </div>
    </div>

    <div class="mobile-view">
        <a href="project1.html"><img src="work3.png"></a>
        <a href="project2.html"><img src="work5.png"></a>
        <a href="project3.html"><img src="work7.png"></a>
        <a href="project4.html"><img src="work10.png"></a>
        <a href="project5.html"><img src="work11.png"></a>
        <a href="project5.html"><img src="work12.png"></a>
        <a href="project6.html"><img src="work13.png"></a>
    </div>

    <script>
        // Проверяем, десктоп это или мобильное устройство
        if (window.matchMedia("(min-width: 769px)").matches) {
            // --- ЛОГИКА ДЛЯ ДЕСКТОПА ---
            const left = document.getElementById('left');
            const right = document.getElementById('right');
            const itemsCount = left.querySelectorAll('.item').length;
            let currentIndex = 0;
            
            let leftAnim = { id: null };
            let rightAnim = { id: null };

            let scrollAccumulator = 0;
            const scrollThreshold = 200;
            let lastScrollTime = 0;
            let scrollResetTimer = null;
            const scrollCooldown = 600;

            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }

            window.onload = () => {
                const params = new URLSearchParams(window.location.search);
                const p = parseInt(params.get('p'), 10);

                if (!isNaN(p) && p >= 0 && p < itemsCount) {
                    currentIndex = p;
                }

                const vh = window.innerHeight;
                left.scrollTop = currentIndex * vh;
                right.scrollTop = (itemsCount - 1 - currentIndex) * vh;
            };

            function smoothScrollTo(element, target, duration, animState) {
                if (animState.id) cancelAnimationFrame(animState.id);
                const start = element.scrollTop;
                const change = target - start;
                const startTime = performance.now();

                function animate(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const ease = 1 - Math.pow(1 - progress, 4);
                    element.scrollTop = start + change * ease;
                    if (progress < 1) {
                        animState.id = requestAnimationFrame(animate);
                    } else {
                        animState.id = null;
                    }
                }
                animState.id = requestAnimationFrame(animate);
            }

            window.addEventListener('wheel', (e) => {
                e.preventDefault();
                const now = Date.now();
                const timeSinceLast = now - lastScrollTime;

                if (timeSinceLast < scrollCooldown) {
                    scrollAccumulator = 0;
                    return;
                }

                scrollAccumulator += e.deltaY;
                clearTimeout(scrollResetTimer);
                scrollResetTimer = setTimeout(() => { scrollAccumulator = 0; }, 200);

                if (Math.abs(scrollAccumulator) > scrollThreshold) {
                    const direction = scrollAccumulator > 0 ? 1 : -1;
                    if ((direction === 1 && currentIndex < itemsCount - 1) || (direction === -1 && currentIndex > 0)) {
                        currentIndex += direction;
                        const vh = window.innerHeight;
                        const duration = timeSinceLast < 1200 ? 800 : 2000;
                        lastScrollTime = now;
                        smoothScrollTo(left, currentIndex * vh, duration, leftAnim);
                        smoothScrollTo(right, (itemsCount - 1 - currentIndex) * vh, duration, rightAnim);
                    }
                    scrollAccumulator = 0;
                }
            }, { passive: false });

        } else {
            // --- ЛОГИКА ДЛЯ МОБИЛЬНЫХ ---
            document.addEventListener('DOMContentLoaded', () => {
                const welcomeScreen = document.getElementById('welcome-screen');
                
                // Через 3 секунды добавляем класс, который запускает анимацию исчезновения
                setTimeout(() => {
                    welcomeScreen.classList.add('hidden');
                    
                    // После завершения анимации (1.5с) окончательно скрываем экран
                    setTimeout(() => {
                        welcomeScreen.style.display = 'none';
                    }, 1500); 
                }, 3000);
            });
        }
    </script>
</body>
</html>
